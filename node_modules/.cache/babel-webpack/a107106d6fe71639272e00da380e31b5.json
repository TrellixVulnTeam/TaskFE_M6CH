{"ast":null,"code":"import { Component, ViewEncapsulation, ElementRef, Input, HostBinding, HostListener, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { VgStates, VgApiService, VgFullscreenApiService, VgControlsHiddenService, VgCoreModule } from '@videogular/ngx-videogular/core';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@videogular/ngx-videogular/core';\nlet VgOverlayPlayComponent = /*#__PURE__*/(() => {\n  class VgOverlayPlayComponent {\n    constructor(ref, API, fsAPI, controlsHidden) {\n      this.API = API;\n      this.fsAPI = fsAPI;\n      this.controlsHidden = controlsHidden;\n      this.vgSkipIfControlsHidden = false;\n      this.vgSkipIfControlsHiddenDelay = 0.5;\n      this.isNativeFullscreen = false;\n      this.areControlsHidden = false;\n      this.areControlsHiddenChangeTime = 0;\n      this.subscriptions = [];\n      this.isBuffering = false;\n      this.elem = ref.nativeElement;\n    }\n\n    ngOnInit() {\n      if (this.API.isPlayerReady) {\n        this.onPlayerReady();\n      } else {\n        this.subscriptions.push(this.API.playerReadyEvent.subscribe(() => this.onPlayerReady()));\n      }\n    }\n\n    onPlayerReady() {\n      this.target = this.API.getMediaById(this.vgFor);\n      this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this)));\n      this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this)));\n      this.subscriptions.push(this.target.subscriptions.bufferDetected.subscribe(isBuffering => this.onUpdateBuffer(isBuffering)));\n    }\n\n    onUpdateBuffer(isBuffering) {\n      this.isBuffering = isBuffering;\n    }\n\n    onChangeFullscreen(fsState) {\n      if (this.fsAPI.nativeFullscreen) {\n        this.isNativeFullscreen = fsState;\n      }\n    }\n\n    onHideControls(hidden) {\n      if (this.vgSkipIfControlsHidden && this.areControlsHidden != hidden) {\n        this.areControlsHiddenChangeTime = Date.now();\n      }\n\n      this.areControlsHidden = hidden;\n    }\n\n    onClick() {\n      if (this.vgSkipIfControlsHidden && (this.areControlsHidden || Date.now() - this.areControlsHiddenChangeTime < this.vgSkipIfControlsHiddenDelay * 1000)) {\n        return;\n      }\n\n      const state = this.getState();\n\n      switch (state) {\n        case VgStates.VG_PLAYING:\n          this.target.pause();\n          break;\n\n        case VgStates.VG_PAUSED:\n        case VgStates.VG_ENDED:\n          this.target.play();\n          break;\n      }\n    }\n\n    getState() {\n      let state = VgStates.VG_PAUSED;\n\n      if (this.target) {\n        if (this.target.state instanceof Array) {\n          for (let i = 0, l = this.target.state.length; i < l; i++) {\n            if (this.target.state[i] === VgStates.VG_PLAYING) {\n              state = VgStates.VG_PLAYING;\n              break;\n            }\n          }\n        } else {\n          state = this.target.state;\n        }\n      }\n\n      return state;\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(s => s.unsubscribe());\n    }\n\n  }\n\n  VgOverlayPlayComponent.ɵfac = function VgOverlayPlayComponent_Factory(t) {\n    return new (t || VgOverlayPlayComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.VgApiService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.VgFullscreenApiService), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.VgControlsHiddenService));\n  };\n\n  VgOverlayPlayComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: VgOverlayPlayComponent,\n    selectors: [[\"vg-overlay-play\"]],\n    hostVars: 2,\n    hostBindings: function VgOverlayPlayComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function VgOverlayPlayComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"is-buffering\", ctx.isBuffering);\n      }\n    },\n    inputs: {\n      vgSkipIfControlsHidden: \"vgSkipIfControlsHidden\",\n      vgSkipIfControlsHiddenDelay: \"vgSkipIfControlsHiddenDelay\",\n      vgFor: \"vgFor\"\n    },\n    decls: 2,\n    vars: 6,\n    consts: [[1, \"vg-overlay-play\"], [1, \"overlay-play-container\"]],\n    template: function VgOverlayPlayComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"native-fullscreen\", ctx.isNativeFullscreen)(\"controls-hidden\", ctx.areControlsHidden);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"vg-icon-play_arrow\", ctx.getState() !== \"playing\");\n      }\n    },\n    styles: [\"\\n      vg-overlay-play {\\n        z-index: 200;\\n      }\\n      vg-overlay-play.is-buffering {\\n        display: none;\\n      }\\n      vg-overlay-play .vg-overlay-play {\\n        transition: all 0.5s;\\n        cursor: pointer;\\n        position: absolute;\\n        display: block;\\n        color: white;\\n        width: 100%;\\n        height: 100%;\\n        font-size: 80px;\\n        filter: alpha(opacity=60);\\n        opacity: 0.6;\\n      }\\n      vg-overlay-play .vg-overlay-play.native-fullscreen.controls-hidden {\\n        cursor: none;\\n      }\\n      vg-overlay-play\\n        .vg-overlay-play\\n        .overlay-play-container.vg-icon-play_arrow {\\n        pointer-events: none;\\n        width: 100%;\\n        height: 100%;\\n        position: absolute;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        font-size: 80px;\\n      }\\n      vg-overlay-play .vg-overlay-play:hover {\\n        filter: alpha(opacity=100);\\n        opacity: 1;\\n      }\\n      vg-overlay-play\\n        .vg-overlay-play:hover\\n        .overlay-play-container.vg-icon-play_arrow:before {\\n        transform: scale(1.2);\\n      }\\n    \"],\n    encapsulation: 2\n  });\n  /** @nocollapse */\n\n  return VgOverlayPlayComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet VgOverlayPlayModule = /*#__PURE__*/(() => {\n  class VgOverlayPlayModule {}\n\n  VgOverlayPlayModule.ɵfac = function VgOverlayPlayModule_Factory(t) {\n    return new (t || VgOverlayPlayModule)();\n  };\n\n  VgOverlayPlayModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: VgOverlayPlayModule\n  });\n  VgOverlayPlayModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, VgCoreModule]]\n  });\n  return VgOverlayPlayModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(VgOverlayPlayModule, {\n    declarations: function () {\n      return [VgOverlayPlayComponent];\n    },\n    imports: function () {\n      return [CommonModule, VgCoreModule];\n    },\n    exports: function () {\n      return [VgOverlayPlayComponent];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { VgOverlayPlayComponent, VgOverlayPlayModule }; //# sourceMappingURL=videogular-ngx-videogular-overlay-play.js.map","map":null,"metadata":{},"sourceType":"module"}